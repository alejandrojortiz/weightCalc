(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8882)}])},8882:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var r=a(5893),l=a(9008),s=a.n(l),i=a(8193);function n(){return(0,r.jsxs)("nav",{className:" flex justify-between bg-white py-5 sticky z-10 top-0 shadow-md px-3",children:[(0,r.jsx)("p",{className:"text-2xl",children:"WEIGHT CALC"}),(0,r.jsxs)("ul",{className:"flex items-center",children:[(0,r.jsx)("li",{className:"px-2",children:(0,r.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/alejandrojortiz",className:"flex items-center",children:(0,r.jsx)(i.RrF,{className:"text-3xl"})})}),(0,r.jsx)("li",{className:"px-2",children:(0,r.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.linkedin.com/in/alejandrojortiz/",className:"flex items-center",children:(0,r.jsx)(i._iD,{className:"text-3xl"})})})]})]})}a(5675);var o=a(5029),c=a(5823);let h=[Math.PI/2,0,Math.PI/2],u=0,m=["red","navy","goldenRod","green","white"],d="#747070",g="white";function x(e){return(0,r.jsxs)("group",{children:[(0,r.jsxs)("mesh",{position:[(3.75+e.offset+.025)*e.side,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[e.plateRadius+.01,e.plateRadius+.01,.025,64,1,!0]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:g})]}),(0,r.jsxs)("mesh",{position:[(3.75+e.offset+e.plateHeight/2)*e.side,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[e.plateRadius,e.plateRadius,e.plateHeight,64]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:e.color})]}),(0,r.jsxs)("mesh",{position:[(3.75+e.offset+(e.plateHeight-.0125))*e.side,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[e.plateRadius+.01,e.plateRadius+.01,.025,64,1,!0]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:g})]})]})}function f(){return(0,r.jsxs)("group",{children:[(0,r.jsxs)("mesh",{position:[0,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.1,.1,7,64]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,r.jsxs)("mesh",{position:[-3.625,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.3,.3,.25,64]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,r.jsxs)("mesh",{position:[3.625,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.3,.3,.25,64]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,r.jsxs)("mesh",{position:[-5.125,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.2,.2,3,64]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,r.jsxs)("mesh",{position:[5.125,0,-5],rotation:h,children:[(0,r.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.2,.2,3,64]}),(0,r.jsx)("meshLambertMaterial",{attach:"material",color:d})]})]})}function y(e){return(0,r.jsxs)(o.Xz,{children:[(0,r.jsx)("color",{attach:"background",args:[e.blackWeights?"white":"black"]}),(0,r.jsx)(c.z,{makeDefault:"true"}),(0,r.jsx)("ambientLight",{intensity:.5}),(0,r.jsx)("spotLight",{position:[10,15,10],angle:.3}),(0,r.jsx)("spotLight",{position:[-10,15,10],angle:.3}),(0,r.jsx)(f,{}),e.weights.map((e,t)=>{0===t&&(u=0);let a=[],l=-1;for(let s=0;s<e.amount;s++){let e=1.25*.9**t,i=.375*.9**t;a=[...a,(0,r.jsx)(x,{plateRadius:e,plateHeight:i,side:l,color:m[t%m.length],offset:u},"".concat(t,":").concat(s))],s%2==1&&(u+=i),l*=-1}return a})]})}function j(e){var t,a;return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col items-center min-h-0 overflow-y-auto",children:[(0,r.jsx)("div",{className:" min-h-[1.125rem] w-full text-center",children:(0,r.jsx)("p",{className:"text-lg pb-1 border-b border-gray-700",children:e.resultText})}),(0,r.jsxs)("div",{className:" w-full flex justify-evenly md:justify-evenly flex-nowrap text-sm lg:text-lg border-b border-gray-700 py-2 mt-4",children:[(0,r.jsx)("button",{onClick:e.saveLayoutClick,children:"Save Layout"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("select",{className:" w-20 lg:w-32 mr-1",value:e.chosenOption,onChange:t=>{e.selectChange(t.target.value)},children:null===(t=e.options)||void 0===t?void 0:t.map((e,t)=>(0,r.jsx)("option",{children:e},t))}),(0,r.jsx)("button",{onClick:e.loadLayout,children:"Load Layout"})]}),(0,r.jsx)("button",{onClick:e.deleteLayout,children:"Delete Layout"})]}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between flex-nowrap w-full border-b border-gray-700 pb-2",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)("label",{className:"block",children:"Target Weight "}),(0,r.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:e.targetWeight,onChange:t=>{e.targetWeightChange(t.target.value)}})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)("label",{className:"block",children:"Bar Weight"}),(0,r.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:e.barWeight,onChange:t=>{e.barWeightChange(t.target.value)}})]})]}),(0,r.jsx)("div",{className:" relative flex-grow border-b border-gray-700 w-full h-full pt-1 overflow-y-auto min-h-0",children:(0,r.jsx)("div",{className:"min-h-0 overflow-y-auto",children:null===(a=e.inputs)||void 0===a?void 0:a.map((t,a)=>(0,r.jsxs)("div",{className:"flex flex-row items-center justify-evenly flex-nowrap w-full",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)("label",{className:"block",children:"Weight"}),(0,r.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:t.weight,onChange:t=>{e.inputChange(a,"weight",t.target.value)}})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,r.jsx)("label",{className:"block",children:"Amount"}),(0,r.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:t.amount,onChange:t=>{e.inputChange(a,"amount",t.target.value)}})]}),(0,r.jsx)(i.oHP,{className:"text-red-500 hover:text-white",onClick:()=>{e.removeWeight(a)}})]},a))})}),(0,r.jsx)("button",{className:" w-3/5 mt-2 bg-gray-700/50 rounded-md text-gray-900 text-lg py-1 lg:max-w-md",onClick:()=>{e.addWeight()},children:"Add Weight"}),(0,r.jsx)("button",{className:" w-3/5 my-3 bg-blue-700 rounded-md text-white text-lg py-1 lg:max-w-md",onClick:e.calculate,children:"Calculate"}),(0,r.jsx)("button",{className:" w-3/5 mb-2 bg-red-500/50 rounded-md text-lg text-red-900 lg:max-w-md",onClick:e.clearLayouts,children:"Clear Layouts"})]})}var w=a(7294),p=a(9520);let b=new p.default("weight-calc-database");b.version(1).stores({layouts:"++id, &name"});var v=a(1039),N=a(2920);function C(){let[e,t]=(0,w.useState)([{weight:0,amount:0}]),[a,l]=(0,w.useState)([]),[i,o]=(0,w.useState)(""),[c,h]=(0,w.useState)(0),[u,m]=(0,w.useState)(0),[d,g]=(0,w.useState)(""),[x,f]=(0,w.useState)(()=>{let e=[];return(async function(){let t=await b.layouts.toArray();if(0!==t.length)for(let a=0;a<t.length;a++)e=[...e,t[a].name]})().then(()=>{e.sort(),f(e),g(e[0])}),e});(0,v.useLiveQuery)(()=>{let e=[];return(async function(){let t=await b.layouts.toArray();if(0!==t.length)for(let a=0;a<t.length;a++)e=[...e,t[a].name]})().then(()=>{e.sort(),f(e)}),e});let p=(e,t)=>Number(t.weight)-Number(e.weight),C=()=>{let t;let r=e=>{f([...x,String(e)].sort()),g(e)};(async function(){if(!(t=prompt("Enter exercise name:").toLowerCase()))throw Error("No name entered");await b.layouts.add({name:t,weights:e,targetWeight:c,barWeight:u,resultText:i,visualizerWeights:a})})().then(()=>{t&&r(t)}).catch(r=>{async function l(){await b.layouts.where("name").equalsIgnoreCase(t).modify({weights:e,targetWeight:c,barWeight:u,resultText:i,visualizerWeights:a})}"ConstraintError"===r.name&&l().then().catch()})},k=(a,r,l)=>{let s=[...e];s[a][r]=l,t(s)},L=()=>{t([...e,{weight:"",amount:""}])},W=a=>{let r=[...e];r.splice(a,1),t(r)},M=()=>{(async function(){let e=await b.layouts.where("name").equals(d).toArray();t(e[0].weights),h(e[0].targetWeight),m(e[0].barWeight),o(e[0].resultText),l(e[0].visualizerWeights)})().catch()},_=()=>{(async function(){d&&await b.layouts.where("name").equals(d).delete()})().then(()=>{x.length?g(x[0]):g("")}).catch()},A=()=>{C(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Weight Calc"}),(0,r.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("div",{className:"flex flex-col h-screen min-h-0",children:[(0,r.jsx)(n,{}),(0,r.jsxs)("main",{className:"w-full flex-grow flex flex-col items-center md:flex-row-reverse overflow-y-auto",children:[(0,r.jsx)("div",{className:"w-full h-2/5 md:h-full md:w-1/2",children:(0,r.jsx)(y,{weights:a})}),(0,r.jsx)("div",{className:" w-full px-3 flex-grow md:h-full md:w-1/2 bg-gray-400 pt-2 overflow-y-auto",children:(0,r.jsx)(j,{inputs:e,resultText:i,saveLayoutClick:A,selectChange:g,options:x,loadLayout:M,deleteLayout:_,targetWeight:c,targetWeightChange:h,barWeight:u,barWeightChange:m,inputChange:k,removeWeight:W,addWeight:L,calculate:()=>{!function(e,t,a){if(t<0){(0,N.Am)("Target weight must be positive!",{type:"error",theme:"colored",autoClose:3e3});return}if(a<0){(0,N.Am)("Bar weight must be positive!",{type:"error",theme:"colored",autoClose:3e3});return}if(isNaN(t)||isNaN(a)){(0,N.Am)("Only numeric input allowed!",{type:"error",theme:"colored",autoClose:3e3});return}for(let t of e){if(isNaN(t.weight)||isNaN(t.amount)){(0,N.Am)("Only numeric input allowed!",{type:"error",theme:"colored",autoClose:3e3});return}if(t.weight<0||t.amount<0){(0,N.Am)("Weight and Amount must be positive!",{type:"error",theme:"colored",autoClose:3e3});return}}if(t-a==0){o("No weights needed"),l([]);return}e.sort(p);let r=e.map(e=>({weight:100*e.weight,amount:e.amount})),s=function e(t,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===a)return new Map;if(r>=t.length)return null;let l=t[r];r++;let s=Math.min(2*Math.floor(a/l.weight/2),2*Math.floor(l.amount/2));for(let i=s;i>=0;i--){let s=e(t,a-l.weight*i,r);if(null!=s)return 0!=i&&s.set(l.weight,i),s}}(r,(t-a)*100);if(s){let e="Use ",t=[],a=new Map([...s.entries()].reverse());for(let r of a.keys())e+="".concat(s.get(r)," ").concat(r/100,"s, "),t=[...t,{weight:r,amount:s.get(r)}];o(e=e.slice(0,e.length-2)),l(t)}else o("Can't make this weight"),(0,N.Am)("Can't make weight",{type:"error",theme:"colored",autoClose:3e3}),l([])}(e,c,u)},clearLayouts:()=>{(async function(){b.open(1),f([])})().then()}})})]}),(0,r.jsx)(N.Ix,{})]})]})}a(7134)}},function(e){e.O(0,[737,617,878,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);