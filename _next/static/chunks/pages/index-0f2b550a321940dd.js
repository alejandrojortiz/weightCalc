(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(8882)}])},8882:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return C}});var l=a(5893),r=a(9008),s=a.n(r),o=a(8193);function i(){return(0,l.jsxs)("nav",{className:" flex justify-between bg-white py-5 sticky z-10 top-0 shadow-md px-3",children:[(0,l.jsx)("p",{className:"text-2xl",children:"WEIGHT CALC"}),(0,l.jsxs)("ul",{className:"flex items-center",children:[(0,l.jsx)("li",{className:"px-2",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/alejandrojortiz",className:"flex items-center",children:(0,l.jsx)(o.RrF,{className:"text-3xl"})})}),(0,l.jsx)("li",{className:"px-2",children:(0,l.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://www.linkedin.com/in/alejandrojortiz/",className:"flex items-center",children:(0,l.jsx)(o._iD,{className:"text-3xl"})})})]})]})}a(5675);var n=a(5029),c=a(5823);let h=[Math.PI/2,0,Math.PI/2],u=0,m=["red","navy","goldenRod","green","white"],d="#747070",g="white";function x(e){return(0,l.jsxs)("group",{children:[(0,l.jsxs)("mesh",{position:[(3.75+e.offset+.025)*e.side,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[e.plateRadius+.01,e.plateRadius+.01,.025,64,1,!0]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:g})]}),(0,l.jsxs)("mesh",{position:[(3.75+e.offset+e.plateHeight/2)*e.side,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[e.plateRadius,e.plateRadius,e.plateHeight,64]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:e.color})]}),(0,l.jsxs)("mesh",{position:[(3.75+e.offset+(e.plateHeight-.0125))*e.side,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[e.plateRadius+.01,e.plateRadius+.01,.025,64,1,!0]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:g})]})]})}function f(){return(0,l.jsxs)("group",{children:[(0,l.jsxs)("mesh",{position:[0,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.1,.1,7,64]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,l.jsxs)("mesh",{position:[-3.625,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.3,.3,.25,64]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,l.jsxs)("mesh",{position:[3.625,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.3,.3,.25,64]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,l.jsxs)("mesh",{position:[-5.125,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.2,.2,3,64]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:d})]}),(0,l.jsxs)("mesh",{position:[5.125,0,-5],rotation:h,children:[(0,l.jsx)("cylinderBufferGeometry",{attach:"geometry",args:[.2,.2,3,64]}),(0,l.jsx)("meshLambertMaterial",{attach:"material",color:d})]})]})}function y(e){return(0,l.jsxs)(n.Xz,{children:[(0,l.jsx)("color",{attach:"background",args:[e.blackWeights?"white":"black"]}),(0,l.jsx)(c.z,{makeDefault:"true"}),(0,l.jsx)("ambientLight",{intensity:.5}),(0,l.jsx)("spotLight",{position:[10,15,10],angle:.3}),(0,l.jsx)("spotLight",{position:[-10,15,10],angle:.3}),(0,l.jsx)(f,{}),e.weights.map((e,t)=>{0===t&&(u=0);let a=[],r=-1;for(let s=0;s<e.amount;s++){let e=1.25*.9**t,o=.375*.9**t;a=[...a,(0,l.jsx)(x,{plateRadius:e,plateHeight:o,side:r,color:m[t%m.length],offset:u},"".concat(t,":").concat(s))],s%2==1&&(u+=o),r*=-1}return a})]})}var j=a(7294);function w(e){var t,a;return(0,l.jsxs)("div",{className:"w-full h-full flex flex-col items-center min-h-0 overflow-y-auto",children:[(0,l.jsx)("div",{className:" min-h-[1.125rem] w-full text-center",children:(0,l.jsx)("p",{className:"text-lg pb-1 border-b border-gray-700",children:e.resultText})}),(0,l.jsxs)("div",{className:" w-full flex justify-evenly md:justify-evenly flex-nowrap text-sm lg:text-lg border-b border-gray-700 py-2 mt-4",children:[(0,l.jsx)("button",{onClick:e.saveLayoutClick,children:"Save Layout"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("select",{className:" w-20 lg:w-32 mr-1",value:e.chosenOption,onChange:t=>{e.selectChange(t.target.value)},children:null===(t=e.options)||void 0===t?void 0:t.map((e,t)=>(0,l.jsx)("option",{children:e},t))}),(0,l.jsx)("button",{onClick:e.loadLayout,children:"Load Layout"})]}),(0,l.jsx)("button",{onClick:e.deleteLayout,children:"Delete Layout"})]}),(0,l.jsxs)("div",{className:"flex flex-row items-center justify-between flex-nowrap w-full border-b border-gray-700 pb-2",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("label",{className:"block",children:"Target Weight "}),(0,l.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:e.targetWeight,onChange:t=>{e.targetWeightChange(t.target.value)}})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("label",{className:"block",children:"Bar Weight"}),(0,l.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:e.barWeight,onChange:t=>{e.barWeightChange(t.target.value)}})]})]}),(0,l.jsx)("div",{className:" relative flex-grow border-b border-gray-700 w-full h-full pt-1 overflow-y-auto min-h-0",children:(0,l.jsx)("div",{className:"min-h-0 overflow-y-auto",children:null===(a=e.inputs)||void 0===a?void 0:a.map((t,a)=>(0,l.jsxs)("div",{className:"flex flex-row items-center justify-evenly flex-nowrap w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("label",{className:"block",children:"Weight"}),(0,l.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:t.weight,onChange:t=>{e.inputChange(a,"weight",t.target.value)}})]}),(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,l.jsx)("label",{className:"block",children:"Amount"}),(0,l.jsx)("input",{className:" w-20 bg-gray-500 pl-1",value:t.amount,onChange:t=>{e.inputChange(a,"amount",t.target.value)}})]}),(0,l.jsx)(o.oHP,{className:"text-red-500 hover:text-white",onClick:()=>{e.removeWeight(a)}})]},a))})}),(0,l.jsx)("button",{className:" w-3/5 mt-2 bg-gray-700/50 rounded-md text-gray-900 text-lg py-1 lg:max-w-md",onClick:()=>{e.addWeight()},children:"Add Weight"}),(0,l.jsx)("button",{className:" w-3/5 my-3 bg-blue-700 rounded-md text-white text-lg py-1 lg:max-w-md",onClick:e.calculate,children:"Calculate"}),(0,l.jsx)("button",{className:" w-3/5 mb-2 bg-red-500/50 rounded-md text-lg text-red-900 lg:max-w-md",onClick:e.clearLayouts,children:"Clear Layouts"})]})}var p=a(9520);let b=new p.default("weight-calc-database");b.version(1).stores({layouts:"++id, &name"});var v=a(1039),N=a(2920);function C(){let[e,t]=(0,j.useState)([{weight:0,amount:0}]),[a,r]=(0,j.useState)([]),[o,n]=(0,j.useState)(""),[c,h]=(0,j.useState)(0),[u,m]=(0,j.useState)(0),[d,g]=(0,j.useState)(""),[x,f]=(0,j.useState)(()=>{let e=[];return(async function(){let t=await b.layouts.toArray();if(0!==t.length)for(let a=0;a<t.length;a++)e=[...e,t[a].name]})().then(()=>{e.sort(),f(e),g(e[0])}),e});(0,v.useLiveQuery)(()=>{let e=[];return(async function(){let t=await b.layouts.toArray();if(0!==t.length)for(let a=0;a<t.length;a++)e=[...e,t[a].name]})().then(()=>{e.sort(),f(e)}),e});let p=()=>{let t,l;let r=e=>{f([...x,String(e)].sort()),g(e)};(async function(){if(!(t=prompt("Enter exercise name:").toLowerCase()))throw Error("No name entered");l=await b.layouts.add({name:t,weights:e,targetWeight:c,barWeight:u,resultText:o,visualizerWeights:a})})().then(()=>{t&&(r(t),console.log("Successfully stored ".concat(t," with id: ").concat(l)))}).catch(l=>{async function r(){await b.layouts.where("name").equalsIgnoreCase(t).modify({weights:e,targetWeight:c,barWeight:u,resultText:o,visualizerWeights:a})}"ConstraintError"===l.name?r().then(console.log("Modified ".concat(t))).catch(e=>console.log("Failed to modify ".concat(t," with error: ").concat(e))):console.log("Failed to add ".concat(t," with error: ").concat(l))})},C=(a,l,r)=>{let s=[...e];s[a][l]=r,console.log("HERE:",l,r),t(s)},k=()=>{console.log("WEIGHTS:",e),t([...e,{weight:"",amount:""}]),console.log("WEIGHTS AFTER: ",e),console.log("BYE")},W=a=>{let l=[...e];l.splice(a,1),t(l)},L=()=>{(async function(){let e=await b.layouts.where("name").equals(d).toArray();t(e[0].weights),h(e[0].targetWeight),m(e[0].barWeight),n(e[0].resultText),r(e[0].visualizerWeights)})().catch(e=>{console.log("Unable to load: ".concat(e))})},E=()=>{(async function(){d&&await b.layouts.where("name").equals(d).delete()})().then(()=>{x.length?g(x[0]):g("")}).catch(e=>{console.log("Failed to delete: ".concat(e))})},M=()=>{p(e)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s(),{children:[(0,l.jsx)("title",{children:"Weight Calc"}),(0,l.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsxs)("div",{className:"flex flex-col h-screen min-h-0",children:[(0,l.jsx)(i,{}),(0,l.jsxs)("main",{className:"w-full flex-grow flex flex-col items-center md:flex-row-reverse overflow-y-auto",children:[(0,l.jsx)("div",{className:"w-full h-2/5 md:h-full md:w-1/2",children:(0,l.jsx)(y,{weights:a})}),(0,l.jsx)("div",{className:" w-full px-3 flex-grow md:h-full md:w-1/2 bg-gray-400 pt-2 overflow-y-auto",children:(0,l.jsx)(w,{inputs:e,resultText:o,saveLayoutClick:M,selectChange:g,options:x,loadLayout:L,deleteLayout:E,targetWeight:c,targetWeightChange:h,barWeight:u,barWeightChange:m,inputChange:C,removeWeight:W,addWeight:k,calculate:()=>{!function(e,t,a){let l=e.map(e=>({weight:100*e.weight,amount:e.amount}));if(t<0){(0,N.Am)("Target weight must be positive!",{type:"error",theme:"colored",autoClose:3e3});return}if(a<0){(0,N.Am)("Bar weight must be positive!",{type:"error",theme:"colored",autoClose:3e3});return}if(isNaN(t)||isNaN(a)){(0,N.Am)("Only numeric input allowed! HI",{type:"error",theme:"colored",autoClose:3e3});return}for(let t of e){if(isNaN(t.weight)||isNaN(t.amount)){(0,N.Am)("Only numeric input allowed! BYE",{type:"error",theme:"colored",autoClose:3e3});return}if(t.weight<0||t.amount<0){(0,N.Am)("Weight and Amount must be positive!",{type:"error",theme:"colored",autoClose:3e3});return}}if(t-a==0){n("No weights needed"),r([]);return}let s=function e(t,a){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===a)return new Map;if(l>=t.length)return null;let r=t[l];l++;let s=Math.min(2*Math.floor(a/r.weight/2),2*Math.floor(r.amount/2));for(let o=s;o>=0;o--){let s=e(t,a-r.weight*o,l);if(null!=s)return 0!=o&&s.set(r.weight,o),s}}(l,(t-a)*100);if(s){let e="Use ",t=[],a=new Map([...s.entries()].reverse());for(let l of a.keys())e+="".concat(s.get(l)," ").concat(l/100,"s, "),t=[...t,{weight:l,amount:s.get(l)}];n(e=e.slice(0,e.length-2)),r(t)}else n("Can't make this weight"),(0,N.Am)("Can't make weight",{type:"error",theme:"colored",autoClose:3e3}),r([])}(e,c,u)},clearLayouts:()=>{(async function(){b.open(1),f([])})().then()}})})]}),(0,l.jsx)(N.Ix,{})]})]})}a(7134)}},function(e){e.O(0,[737,617,878,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);